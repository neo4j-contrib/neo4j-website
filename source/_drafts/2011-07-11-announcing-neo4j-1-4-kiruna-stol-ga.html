---
layout: post
title: "Announcing Neo4j 1.4 &quot;Kiruna Stol&quot; GA"
date: 2011-07-11
comments: false
---

<div class='post'>
<font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" id="internal-source-marker_0.797883984406799" color="transparent" face="Arial" size="11pt">Over  the last three months, we’ve released 6 milestones in our 1.4 series.  Today we’re releasing the final Neo4j 1.4 General Availability (GA)  package. We’ve seen a whole host of new features going into the product  during this time, along with numerous performance and stability  improvements. We think this is our best release yet, and we hope you  like the direction in which the product is heading.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Cypher Query Language</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">For  some time now Neo4j has supported the Gremlin query language for  traversing graphs. To complement that, we’ve introduce a new language  called “Cypher” which provides humane, DBA-friendly syntax for graph  queries. With Cypher, queries can often be easily expressed, for example  this Cypher query finds friends-of-friends concisely:</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">START user = (people-index, name, "John")</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">MATCH user-[:FRIEND_OF]-&gt; () -[:FRIEND_OF]-&gt; fof</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">RETURN fof</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">While  Cypher can’t yet mutate graphs, it’s a really powerful and interesting  way of exploring, and drawing business intelligence of your data.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Automatic Indexing</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Neo4j’s  index framework is powerful and tightly integrated with the database,  but there are times when you’d gladly trade some of that power for a  little less effort. And that’s where auto-indexing comes in. With a  little configuration the auto-indexing framework will take care of  managing the lifecycle of index entries so that they’re consistent with  the data in the graph.</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">The  auto-indexing framework allows us to declare that specific properties  in nodes and relationships should be indexed. As those properties are  created, updated, and removed, so too the corresponding entries in the  index change.</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">To create an auto-index in code:</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">AutoIndexer<node> nodeAutoIndexer = graphDb.index().getNodeAutoIndexer();</node></font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">nodeAutoIndexer.startAutoIndexingProperty( "model" );</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">nodeAutoIndexer.setEnabled( true );</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Now  any nodes with the property called “model” will appear in the  auto-index. This auto-index can be accessed and queried in a similar way  to regular indexes:</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">ReadableIndex<node> autoNodeIndex = graphDb.index().getNodeAutoIndexer().getAutoIndex();</node></font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">And while we’ve only shown node indexes here, of course the same functionality applies to relationships.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Index Improvements</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">In  this release we’ve taken the opportunity to upgrade to Lucene 3.1. This  means index operations will be faster thanks to the hard work of the  Lucene community. However the transition to Lucene 3.1 indexes means an </font><font style="color:#000000;background-font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">irreversible</font><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">  change to index stores – so ensure you’re ready to upgrade your indexes  before switching to the 1.4 GA release, and keep a backup of your data!  </font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Self Relationships</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">When  modelling domains, entities which refer to themselves are somewhat  common. For example, the self-employed are their own bosses. In previous  versions of Neo4j we’d model that with two relationships and a (dummy)  node. It worked but it was less expressive than we liked.</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Our  community have lobbied about this, and we’ve listened. So, from this  release Neo4j supports relationships whose start and end nodes are the  same. So for those lucky people who are their own boss, you can now  express subgraphs like:</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Courier New" size="11pt">Albert-BOSS_OF-&gt;Albert</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">And the database will happily persist that structure and make it available for traversals.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Performance Improvements</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Down  in the engine room our kernel hackers have been busy. Our boffins have  implemented new directional caching strategies and tweaked the code path  to make small transactions (especially) much more efficient. This all  adds up to a substantial performance improvement and a database engine  that feels a whole lot snappier.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">REST API Improvements</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">In  the Neo4j server, we’ve been pushing the REST API forwards. To that  end, we now have batch behaviour exposed so that large bundles of  commands can be executed efficiently on the server, thereby paying the  network penalty only once.</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">We’ve  also included a paging mechanism for traversers. Any traversals that  you execute on the server can return their results in pages rather than  as a single large chunk. This means traversers can be terminated early  (when enough results have been gathered) and provides more manageable  chunks of data to work with, making the server more efficient (as well  as taking the pressure off clients).</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Finally  we’ve made REST indexes on a par with the embedded indexes, and from  this release the same arbitrary queries and index management supported  in the Java APIs are available to our community of RESTafarians too!</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Webadmin Improvements</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Our  browser-heads have been plugging away, knee-deep in coffeescript and  CSS, and the results show. The Webadmin tool that comes with the server  is looking better than ever. With this release, there’s a new index  manager tab that allows DBAs to fully control indexes on the graph with a  friendly point-and-click interface.</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">We’ve  also expanded the set of consoles available. To compliment the existing  Gremlin console, we’ve added a Cypher console. This means to get up and  running with Cypher it’s as simple as downloading Neo4j, running the  server, and opening a Web browser!</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">For  our RESTafarian friends, we’ve also created a neat HTTP console that  allows users to create simplified curl-like commands that can be  executed against the server. This is extremely useful as a REPL for  exploring the REST API and testing extensions and plugins.</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">New Server Management Scripts</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">Ever  since we first released Neo4j server we’ve used 3rd party libraries and  scripts to help users manage the service. Unfortunately both of the 3rd  party wrappers we’ve used have been painful for everyone concerned. So  late in the 1.4 release cycle we switched out those wrappers and  provided much simpler bash (if you’re on a Unix variant) and command  scripts (if you’re on Windows) instead - much nicer!</font><br /><font style="color:#000000;background-font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="18pt">Ready to go!</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt">The  1.4 GA release is now available through our download page, and the  components have been pushed out to the Maven central repository.  Remember, we always value your feedback over on the community mailing  list, but in the meantime we wish you all happy hacking!</font><br /><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt"></font><font style="color:#000000;background-font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;" color="transparent" face="Arial" size="11pt"></font></div>
